
name: Python Unit Tests

on: [push, pull_request, create]

jobs:
    tests:
        runs-on: ${{ matrix.os }}
        strategy:
            matrix:
                os: [ubuntu-18.04]
                python: ['3.7']
                pytorch: ['1.6.0']
                torchvision: ['0.7']

        steps:
            - name: Clone Repository
              uses: actions/checkout@master
              with:
                ref: ${{ github.ref }}
            - name: Set up Python
              uses: actions/setup-python@v2
              with:
                python-version: ${{ matrix.python }}
            - name: Install Dependencies
              run: |
                  python --version
                  python -m pip install -U pip
                  pip install --install-option="--no-cython-compile" cython
                  make dev
            - name: Lint Code
              run: make lint
            - name: Run Tests
              run: make tests
